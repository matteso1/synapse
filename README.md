# Synapse

<div align="center">
  <img src="client/public/synapse.svg" width="80" height="80" alt="Synapse Logo">
  <h3>Real-time Collaborative Whiteboard</h3>
  <p><em>Draw together in real-time with conflict-free synchronization</em></p>
  
  <p>
    <a href="https://synapse.nilsmatteson.com">Live Demo</a> â€¢
    <a href="#features">Features</a> â€¢
    <a href="#tech-stack">Tech Stack</a> â€¢
    <a href="#architecture">Architecture</a>
  </p>
</div>

---

## âœ¨ Features

- **ğŸ¨ Freehand Drawing** â€” Smooth pen tool with adjustable colors and stroke width
- **ğŸ‘¥ Real-time Cursors** â€” See other users' cursors moving live
- **âš¡ Instant Sync** â€” CRDTs (Yjs) ensure conflict-free collaboration
- **ğŸ”— Easy Sharing** â€” Short room codes to invite collaborators
- **â™¾ï¸ Infinite Canvas** â€” Zoom and pan to explore unlimited space
- **ğŸŒ™ Dark Theme** â€” Beautiful modern UI with glassmorphism effects

---

## ğŸ› ï¸ Tech Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   React 18  â”‚  â”‚ TypeScript  â”‚  â”‚    HTML5 Canvas API     â”‚  â”‚
â”‚  â”‚   + Vite    â”‚  â”‚   Strict    â”‚  â”‚ (Hardware Accelerated)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Zustand   â”‚  â”‚     Yjs     â”‚  â”‚      y-websocket        â”‚  â”‚
â”‚  â”‚    Store    â”‚  â”‚    CRDT     â”‚  â”‚   (Real-time Sync)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ WebSocket
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Node.js WebSocket Server                    â”‚    â”‚
â”‚  â”‚    â€¢ Yjs document sync & awareness protocol              â”‚    â”‚
â”‚  â”‚    â€¢ Room-based multiplayer sessions                     â”‚    â”‚
â”‚  â”‚    â€¢ Scales horizontally with Redis Pub/Sub              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Architecture

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                   SYNAPSE                         â”‚
                    â”‚           Collaborative Whiteboard                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                             â”‚                             â”‚
           â–¼                             â–¼                             â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Browser 1   â”‚            â”‚   Browser 2   â”‚            â”‚   Browser N   â”‚
   â”‚               â”‚            â”‚               â”‚            â”‚               â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚ Canvas  â”‚  â”‚            â”‚  â”‚ Canvas  â”‚  â”‚            â”‚  â”‚ Canvas  â”‚  â”‚
   â”‚  â”‚  Render â”‚  â”‚            â”‚  â”‚  Render â”‚  â”‚            â”‚  â”‚  Render â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚            â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚            â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚
   â”‚       â”‚       â”‚            â”‚       â”‚       â”‚            â”‚       â”‚       â”‚
   â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”‚            â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”‚            â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚  Yjs    â”‚  â”‚            â”‚  â”‚  Yjs    â”‚  â”‚            â”‚  â”‚  Yjs    â”‚  â”‚
   â”‚  â”‚  Doc    â”‚â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–ºâ”‚  Doc    â”‚â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–ºâ”‚  Doc    â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚            â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚            â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚
   â”‚       â”‚       â”‚            â”‚       â”‚       â”‚            â”‚       â”‚       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                            â”‚                            â”‚
           â”‚         WebSocket          â”‚         WebSocket          â”‚
           â”‚                            â”‚                            â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚    WebSocket Server     â”‚
                          â”‚                         â”‚
                          â”‚  â€¢ Room Management      â”‚
                          â”‚  â€¢ Yjs Sync Protocol    â”‚
                          â”‚  â€¢ Awareness Broadcast  â”‚
                          â”‚                         â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚    Redis (Optional)     â”‚
                          â”‚                         â”‚
                          â”‚  â€¢ Pub/Sub for scaling  â”‚
                          â”‚  â€¢ Session persistence  â”‚
                          â”‚                         â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### How CRDTs Enable Real-time Collaboration

```
User A draws                User B draws              Conflict-free merge
    â”‚                           â”‚                           â”‚
    â–¼                           â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stroke  â”‚               â”‚ Stroke  â”‚               â”‚  Both strokes   â”‚
â”‚   A1    â”‚               â”‚   B1    â”‚               â”‚   preserved     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜               â”‚   correctly!    â”‚
     â”‚                         â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚                           â–²
     â””â”€â”€â”€â–ºâ”‚    CRDT     â”‚â—„â”€â”€â”€â”€â”€â”˜                           â”‚
          â”‚   Merge     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚  Algorithm  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Quick Start

### Prerequisites

- **Node.js** 18+ â€” [Install](https://nodejs.org/)
- **Git** â€” [Install](https://git-scm.com/)

### Local Development

```bash
# Clone the repository
git clone https://github.com/matteso1/synapse.git
cd synapse

# Start the WebSocket server
cd ws-server
npm install
npm start
# Server runs on ws://localhost:1234

# In a new terminal, start the frontend
cd client
npm install
npm run dev
# Opens http://localhost:5173
```

### Collaborate

1. Click **Create New Room**
2. Share the room code with a friend
3. Draw together in real-time! ğŸ¨

---

## ğŸ“ Project Structure

```
synapse/
â”œâ”€â”€ client/                 # React + TypeScript frontend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # Canvas, Toolbar, UserPresence
â”‚   â”‚   â”œâ”€â”€ hooks/          # useYjs (CRDT integration)
â”‚   â”‚   â”œâ”€â”€ stores/         # Zustand state management
â”‚   â”‚   â”œâ”€â”€ lib/            # Canvas rendering utilities
â”‚   â”‚   â””â”€â”€ types/          # TypeScript definitions
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ws-server/              # Node.js WebSocket server
â”‚   â”œâ”€â”€ server.js           # Yjs sync & room management
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ server/                 # Rust backend (production)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs         # Actix-web server
â”‚   â”‚   â”œâ”€â”€ room.rs         # Room management
â”‚   â”‚   â””â”€â”€ protocol.rs     # Message types
â”‚   â””â”€â”€ Cargo.toml
â”‚
â””â”€â”€ docker-compose.yml      # Local dev with Redis
```

---

## ğŸ¯ Roadmap

- [x] Freehand drawing with pen tool
- [x] Real-time cursor sharing
- [x] Yjs CRDT integration
- [x] User presence indicators
- [x] Room codes for collaboration
- [ ] Shape tools (rectangle, ellipse, arrow)
- [ ] Selection and transforms
- [ ] Undo/redo history
- [ ] Export to PNG/SVG
- [ ] Mobile touch support

---

## ğŸŒ Deployment

| Service | Platform | URL |
|---------|----------|-----|
| Frontend | Vercel | synapse.nilsmatteson.com |
| WebSocket | Railway | wss://synapse-ws.up.railway.app |

---

## ğŸ“„ License

MIT Â© [Nils Matteson](https://nilsmatteson.com)
